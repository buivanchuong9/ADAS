================================================================================
DANH S√ÅCH API C·∫¶N THI·∫æT CHO ADAS FRONTEND - ƒê·∫¶Y ƒê·ª¶
Ng√†y ph√¢n t√≠ch: 21/12/2025
Backend Developer: implement t·∫•t c·∫£ c√°c API sau
================================================================================

I. C√ÅC API ƒê√É C√ì TRONG BACKEND (Theo Swagger)
================================================================================

‚úÖ System & Health Check:
   - GET  /health                           
     Response: { status: "ok", timestamp: "..." }

‚úÖ Admin & Analytics:
   - GET  /admin/overview                   
     Response: { 
       totalDetections: number,
       totalTrips: number, 
       totalEvents: number,
       avgSafetyScore: number 
     }

   - GET  /admin/statistics                 
     Response: {
       classes: [{ class_name: string, count: number, avg_confidence: number }],
       total: number
     }

   - GET  /admin/charts                     
     Response: { chart_data: any[] }

   - GET  /admin/video/{videoId}/timeline   
     Response: { timeline: any[] }

‚úÖ Vision/Video Processing:
   - POST /vision/video                     
     Request: FormData { file: File, description?: string }
     Response: {
       success: boolean,
       message: string,
       data: {
         id: number,
         filename: string,
         file_size_mb: number,
         uploaded_at: string,
         status: string
       }
     }

   - POST /vision/video/{id}/process        
     Response: { success: boolean, message: string }


II. C√ÅC API C·∫¶N IMPLEMENT - DETECTIONS (CRITICAL ‚ö†Ô∏è)
================================================================================

‚ùå POST /api/detections/save
   M·ª•c ƒë√≠ch: L∆∞u k·∫øt qu·∫£ detection t·ª´ video/webcam
   Request: {
     video_id?: number,
     camera_id?: string,
     detections: [{
       class_name: string,
       class_id: number,
       confidence: number,
       bbox: [x1, y1, x2, y2],
       timestamp: string
     }],
     metadata?: any
   }
   Response: { success: boolean, detection_id: number }

‚ùå GET /api/detections/recent
   M·ª•c ƒë√≠ch: L·∫•y danh s√°ch detections g·∫ßn ƒë√¢y
   Query Params: limit=20, camera_id?, class_name?
   Response: {
     success: boolean,
     detections: [{
       id: number,
       class_name: string,
       confidence: number,
       timestamp: string,
       camera_id: string,
       bbox: [x1, y1, x2, y2]
     }]
   }

‚ùå GET /api/detections/stats
   M·ª•c ƒë√≠ch: Th·ªëng k√™ detections (cho dashboard)
   Response: {
     total_detections: number,
     classes: [{
       class_name: string,
       count: number,
       avg_confidence: number
     }],
     by_camera: [{
       camera_id: string,
       count: number
     }]
   }


III. C√ÅC API C·∫¶N IMPLEMENT - DATASET (CRITICAL ‚ö†Ô∏è)
================================================================================

‚ùå GET /api/dataset
   M·ª•c ƒë√≠ch: L·∫•y danh s√°ch dataset/videos ƒë√£ upload
   Query Params: limit=50, page=1, status?, type?
   Response: {
     success: boolean,
     data: [{
       id: number,
       filename: string,
       file_path: string,
       video_url?: string,
       file_url?: string,
       description?: string,
       file_size_mb: number,
       duration_seconds?: number,
       uploaded_at: string,
       status: "uploaded" | "processing" | "ready" | "error",
       ready_for_training: boolean,
       metadata?: any
     }],
     total: number,
     page: number,
     limit: number
   }

‚ùå POST /api/dataset
   M·ª•c ƒë√≠ch: Upload file v√†o dataset (video/image)
   Request: FormData {
     file: File,
     description?: string,
     type?: "video" | "image",
     tags?: string[]
   }
   Response: {
     success: boolean,
     message: string,
     data: {
       id: number,
       filename: string,
       file_path: string,
       file_size_mb: number,
       uploaded_at: string
     }
   }

‚ùå DELETE /api/dataset/{id}
   M·ª•c ƒë√≠ch: X√≥a file kh·ªèi dataset
   Response: { success: boolean, message: string }

‚ùå GET /api/dataset/{id}
   M·ª•c ƒë√≠ch: L·∫•y th√¥ng tin chi ti·∫øt 1 dataset item
   Response: {
     success: boolean,
     data: {
       id: number,
       filename: string,
       file_path: string,
       video_url?: string,
       description?: string,
       uploaded_at: string,
       detections_count?: number,
       metadata?: any
     }
   }


IV. C√ÅC API C·∫¶N IMPLEMENT - MODELS (HIGH PRIORITY üî¥)
================================================================================

‚ùå GET /api/models/available
   M·ª•c ƒë√≠ch: List t·∫•t c·∫£ models c√≥ th·ªÉ d√πng
   Response: {
     success: boolean,
     models: [{
       id: string,
       name: string,
       description: string,
       type: "detection" | "segmentation" | "depth",
       size_mb: number,
       accuracy: number,
       speed_ms: number,
       downloaded: boolean,
       file_path?: string,
       download_url?: string
     }],
     total_models: number
   }

‚ùå POST /api/models/download/{id}
   M·ª•c ƒë√≠ch: Download model v·ªÅ server
   Response: {
     success: boolean,
     message: string,
     model: {
       id: string,
       name: string,
       file_path: string,
       size_mb: number,
       downloaded: true
     }
   }

‚ùå GET /api/models/info/{id}
   M·ª•c ƒë√≠ch: L·∫•y th√¥ng tin chi ti·∫øt model
   Response: {
     success: boolean,
     model: {
       id: string,
       name: string,
       description: string,
       type: string,
       size_mb: number,
       accuracy: number,
       speed_ms: number,
       downloaded: boolean,
       classes: string[],
       input_size: [width, height],
       metadata: any
     }
   }

‚ùå DELETE /api/models/delete/{id}
   M·ª•c ƒë√≠ch: X√≥a model kh·ªèi server
   Response: { success: boolean, message: string }

‚ùå POST /api/models/download-all
   M·ª•c ƒë√≠ch: Download t·∫•t c·∫£ essential models
   Response: {
     success: boolean,
     downloaded: string[],
     failed: string[]
   }


V. C√ÅC API C·∫¶N IMPLEMENT - EVENTS (MEDIUM PRIORITY üü°)
================================================================================

‚ùå POST /api/events
   M·ª•c ƒë√≠ch: T·∫°o event m·ªõi (collision, lane departure, etc.)
   Request: {
     type: "collision" | "lane_departure" | "fatigue" | "distraction" | "speed" | "driver_status",
     severity: "critical" | "warning" | "info",
     description: string,
     timestamp: string,
     location?: string,
     metadata?: any,
     video_id?: number,
     camera_id?: string
   }
   Response: {
     success: boolean,
     event_id: number,
     message: string
   }

‚ùå GET /api/events/list
   M·ª•c ƒë√≠ch: L·∫•y danh s√°ch events
   Query Params: type?, limit=50, page=1, severity?, from_date?, to_date?
   Response: {
     success: boolean,
     events: [{
       id: number,
       type: string,
       severity: string,
       title: string,
       description: string,
       timestamp: string,
       location?: string,
       metadata?: any,
       acknowledged: boolean
     }],
     total: number
   }

‚ùå PUT /api/events/{id}/acknowledge
   M·ª•c ƒë√≠ch: ƒê√°nh d·∫•u event ƒë√£ xem/x·ª≠ l√Ω
   Response: { success: boolean }

‚ùå DELETE /api/events/{id}
   M·ª•c ƒë√≠ch: X√≥a event
   Response: { success: boolean }


VI. C√ÅC API C·∫¶N IMPLEMENT - TRIPS (MEDIUM PRIORITY üü°)
================================================================================

‚ùå POST /api/trips
   M·ª•c ƒë√≠ch: T·∫°o trip m·ªõi (chuy·∫øn ƒëi)
   Request: {
     driver_id?: string,
     vehicle_id?: string,
     start_time: string,
     end_time?: string,
     start_location?: string,
     end_location?: string,
     distance_km?: number,
     metadata?: any
   }
   Response: {
     success: boolean,
     trip_id: number
   }

‚ùå GET /api/trips/list
   M·ª•c ƒë√≠ch: L·∫•y danh s√°ch trips
   Query Params: limit=50, page=1, driver_id?, from_date?, to_date?
   Response: {
     success: boolean,
     trips: [{
       id: number,
       driver_id?: string,
       vehicle_id?: string,
       start_time: string,
       end_time?: string,
       distance_km: number,
       duration_minutes: number,
       safety_score: number,
       events_count: number,
       status: "ongoing" | "completed"
     }],
     total: number
   }

‚ùå GET /api/trips/{id}
   M·ª•c ƒë√≠ch: Chi ti·∫øt 1 trip
   Response: {
     success: boolean,
     trip: {
       id: number,
       start_time: string,
       end_time: string,
       distance_km: number,
       avg_speed: number,
       safety_score: number,
       events: any[],
       detections: any[],
       route?: any,
       metadata?: any
     }
   }

‚ùå PUT /api/trips/{id}/complete
   M·ª•c ƒë√≠ch: ƒê√°nh d·∫•u trip ho√†n th√†nh
   Request: { end_time: string, distance_km: number }
   Response: { success: boolean }

‚ùå GET /api/trips/analytics
   M·ª•c ƒë√≠ch: Th·ªëng k√™ t·ªïng h·ª£p trips (cho Analytics page)
   Response: {
     total_trips: number,
     total_distance_km: number,
     avg_safety_score: number,
     by_date: [{
       date: string,
       trips_count: number,
       total_distance: number,
       avg_score: number
     }]
   }


VII. C√ÅC API C·∫¶N IMPLEMENT - ALERTS (MEDIUM PRIORITY üü°)
================================================================================

‚ùå GET /api/alerts/latest
   M·ª•c ƒë√≠ch: L·∫•y alerts m·ªõi nh·∫•t (real-time warnings)
   Query Params: limit=10, severity?, unplayed_only=false
   Response: {
     success: boolean,
     alerts: [{
       id: number,
       type: string,
       severity: "critical" | "warning" | "info",
       message: string,
       timestamp: string,
       played: boolean,
       data?: any
     }]
   }

‚ùå GET /api/alerts/stats
   M·ª•c ƒë√≠ch: Th·ªëng k√™ alerts
   Response: {
     total: number,
     by_severity: {
       critical: number,
       warning: number,
       info: number
     },
     recent_24h: number,
     unplayed: number
   }

‚ùå PUT /api/alerts/{id}/played
   M·ª•c ƒë√≠ch: ƒê√°nh d·∫•u alert ƒë√£ ph√°t
   Response: { success: boolean }


VIII. C√ÅC API C·∫¶N IMPLEMENT - DRIVER STATUS (LOW PRIORITY üü¢)
================================================================================

‚ùå POST /api/driver-status
   M·ª•c ƒë√≠ch: G·ª≠i tr·∫°ng th√°i t√†i x·∫ø (fatigue, distraction)
   Request: {
     driver_id?: string,
     fatigue_level: number,      // 0-100
     distraction_level: number,  // 0-100
     eyes_closed: boolean,
     head_pose?: any,
     timestamp: string,
     camera_id?: string
   }
   Response: {
     success: boolean,
     alert_triggered: boolean,
     recommendations?: string[]
   }

‚ùå GET /api/driver-status
   M·ª•c ƒë√≠ch: L·∫•y tr·∫°ng th√°i t√†i x·∫ø hi·ªán t·∫°i
   Query Params: driver_id?, camera_id?
   Response: {
     success: boolean,
     status: {
       fatigue_level: number,
       distraction_level: number,
       eyes_closed: boolean,
       last_updated: string,
       alert_status: "normal" | "warning" | "critical"
     }
   }

‚ùå GET /api/driver-status/history
   M·ª•c ƒë√≠ch: L·ªãch s·ª≠ tr·∫°ng th√°i t√†i x·∫ø
   Query Params: driver_id?, from_date?, to_date?, limit=100
   Response: {
     success: boolean,
     history: [{
       timestamp: string,
       fatigue_level: number,
       distraction_level: number,
       alert_triggered: boolean
     }]
   }


IX. C√ÅC API C·∫¶N IMPLEMENT - AI ASSISTANT (LOW PRIORITY üü¢)
================================================================================

‚ùå POST /api/ai-chat
   M·ª•c ƒë√≠ch: Chat v·ªõi AI assistant
   Request: {
     message: string,
     session_id?: string,
     context?: any
   }
   Response: {
     success: boolean,
     message: string,
     response: string,
     timestamp: string,
     session_id: string
   }

‚ùå GET /api/ai-chat/history
   M·ª•c ƒë√≠ch: L·∫•y l·ªãch s·ª≠ chat
   Query Params: session_id?, limit=50
   Response: {
     success: boolean,
     messages: [{
       id: number,
       role: "user" | "assistant",
       content: string,
       timestamp: string
     }]
   }

‚ùå DELETE /api/ai-chat/session/{id}
   M·ª•c ƒë√≠ch: X√≥a session chat
   Response: { success: boolean }


X. REAL-TIME APIs - THAY TH·∫æ WEBSOCKET B·∫∞NG HTTP POLLING/SSE
================================================================================

üîÑ KH√îNG D√ôNG WEBSOCKET - D√πng HTTP Polling ho·∫∑c Server-Sent Events (SSE)

‚ùå POST /api/stream/start
   M·ª•c ƒë√≠ch: B·∫Øt ƒë·∫ßu session streaming (thay WebSocket)
   Request: {
     source: "webcam" | "video",
     model_id: "yolo11n",
     video_id?: number,
     config?: any
   }
   Response: {
     success: boolean,
     session_id: string,
     polling_url: "/api/stream/poll/{session_id}"
   }

‚ùå GET /api/stream/poll/{session_id}
   M·ª•c ƒë√≠ch: L·∫•y k·∫øt qu·∫£ detection (polling m·ªói 100-200ms)
   Response: {
     success: boolean,
     detections: [{
       class_name: string,
       confidence: number,
       bbox: [x1, y1, x2, y2]
     }],
     fps: number,
     latency_ms: number,
     frame_id: number,
     status: "processing" | "stopped" | "error"
   }

‚ùå POST /api/stream/frame
   M·ª•c ƒë√≠ch: G·ª≠i frame t·ª´ webcam l√™n ƒë·ªÉ detect
   Request: FormData {
     session_id: string,
     frame: base64 string or binary,
     timestamp: number
   }
   Response: {
     success: boolean,
     detections: [...],
     latency_ms: number
   }

‚ùå POST /api/stream/stop
   M·ª•c ƒë√≠ch: D·ª´ng streaming session
   Request: { session_id: string }
   Response: { success: boolean }

‚ùå GET /api/video/{id}/process-status
   M·ª•c ƒë√≠ch: Polling progress khi process video (thay ws/inference/video)
   Response: {
     success: boolean,
     progress: number,        // 0-100
     current_frame: number,
     total_frames: number,
     status: "processing" | "completed" | "error",
     detections_count: number,
     estimated_time_remaining_seconds?: number
   }

‚ùå POST /api/driver-monitor/analyze
   M·ª•c ƒë√≠ch: Analyze driver face frame (thay ws/driver-monitor)
   Request: FormData {
     frame: base64 image,
     camera_id: string
   }
   Response: {
     success: boolean,
     fatigue_level: number,
     distraction_level: number,
     eyes_closed: boolean,
     head_pose: { yaw: number, pitch: number, roll: number },
     alert_triggered: boolean,
     recommendations?: string[]
   }

üí° Alternative cho Real-time Updates:
   - Server-Sent Events (SSE): GET /api/events/stream
     Cho live updates c·ªßa alerts, events m·ªõi
   - Short Polling: Frontend poll m·ªói 1-2 gi√¢y cho updates
   - Long Polling: Request gi·ªØ connection ƒë·∫øn khi c√≥ data m·ªõi


XI. C√ÅC API B·ªî SUNG - VIDEO MANAGEMENT
================================================================================

‚ùå GET /api/videos/list
   M·ª•c ƒë√≠ch: List t·∫•t c·∫£ videos ƒë√£ upload
   Query Params: limit=50, page=1, status?, processed?
   Response: {
     success: boolean,
     videos: [{
       id: number,
       filename: string,
       file_path: string,
       thumbnail_url?: string,
       duration_seconds: number,
       uploaded_at: string,
       processed: boolean,
       detections_count: number,
       status: "uploaded" | "processing" | "completed"
     }],
     total: number
   }

‚ùå GET /api/videos/{id}
   M·ª•c ƒë√≠ch: Th√¥ng tin chi ti·∫øt video
   Response: {
     success: boolean,
     video: {
       id: number,
       filename: string,
       file_path: string,
       video_url: string,
       thumbnail_url?: string,
       duration_seconds: number,
       fps: number,
       resolution: { width: number, height: number },
       file_size_mb: number,
       uploaded_at: string,
       processed: boolean,
       processing_time_seconds?: number,
       detections: any[],
       events: any[],
       metadata?: any
     }
   }

‚ùå DELETE /api/videos/{id}
   M·ª•c ƒë√≠ch: X√≥a video
   Response: { success: boolean }

‚ùå GET /api/videos/{id}/detections
   M·ª•c ƒë√≠ch: L·∫•y t·∫•t c·∫£ detections c·ªßa 1 video
   Query Params: class_name?, min_confidence?
   Response: {
     success: boolean,
     detections: [{
       frame_number: number,
       timestamp_seconds: number,
       detections: [{
         class_name: string,
         confidence: number,
         bbox: [x1, y1, x2, y2]
       }]
     }]
   }

‚ùå GET /api/videos/{id}/timeline
   M·ª•c ƒë√≠ch: Timeline events c·ªßa video (ƒë√£ c√≥ ·ªü /admin/video/{id}/timeline)
   C√≥ th·ªÉ d√πng l·∫°i endpoint /admin/video/{id}/timeline


XII. C√ÅC API B·ªî SUNG - STATISTICS & ANALYTICS
================================================================================

‚ùå GET /api/statistics/summary
   M·ª•c ƒë√≠ch: T·ªïng h·ª£p th·ªëng k√™ to√†n h·ªá th·ªëng
   Response: {
     total_videos: number,
     total_detections: number,
     total_events: number,
     total_trips: number,
     total_storage_gb: number,
     active_cameras: number,
     last_24h: {
       videos: number,
       detections: number,
       events: number
     }
   }

‚ùå GET /api/statistics/detections-by-class
   M·ª•c ƒë√≠ch: Th·ªëng k√™ detections theo class
   Query Params: from_date?, to_date?
   Response: {
     classes: [{
       class_name: string,
       count: number,
       percentage: number,
       avg_confidence: number
     }]
   }

‚ùå GET /api/statistics/events-by-type
   M·ª•c ƒë√≠ch: Th·ªëng k√™ events theo type
   Response: {
     types: [{
       type: string,
       count: number,
       percentage: number,
       last_occurrence: string
     }]
   }

‚ùå GET /api/statistics/performance
   M·ª•c ƒë√≠ch: Performance metrics h·ªá th·ªëng
   Response: {
     avg_inference_time_ms: number,
     avg_fps: number,
     total_frames_processed: number,
     models_loaded: string[],
     gpu_usage?: number,
     cpu_usage?: number,
     memory_usage_mb: number
   }


XIII. C√ÅC API B·ªî SUNG - SETTINGS & CONFIGURATION
================================================================================

‚ùå GET /api/settings
   M·ª•c ƒë√≠ch: L·∫•y settings h·ªá th·ªëng
   Response: {
     detection: {
       confidence_threshold: number,
       nms_threshold: number,
       max_detections: number
     },
     alerts: {
       enabled: boolean,
       sound_enabled: boolean,
       severity_filter: string[]
     },
     video: {
       auto_process: boolean,
       save_processed_video: boolean,
       max_file_size_mb: number
     }
   }

‚ùå PUT /api/settings
   M·ª•c ƒë√≠ch: C·∫≠p nh·∫≠t settings
   Request: { ... same structure as GET response ... }
   Response: { success: boolean, message: string }

‚ùå GET /api/settings/cameras
   M·ª•c ƒë√≠ch: List cameras ƒë√£ config
   Response: {
     cameras: [{
       id: string,
       name: string,
       location: string,
       status: "active" | "inactive",
       stream_url?: string
     }]
   }

‚ùå POST /api/settings/cameras
   M·ª•c ƒë√≠ch: Th√™m camera m·ªõi
   Request: { name: string, location: string, stream_url?: string }
   Response: { success: boolean, camera_id: string }


XIV. C√ÅC API B·ªî SUNG - AUTHENTICATION & USERS (Optional)
================================================================================

üü£ POST /api/auth/login
   Request: { username: string, password: string }
   Response: { 
     success: boolean, 
     token: string, 
     user: { id: string, username: string, role: string } 
   }

üü£ POST /api/auth/logout
   Response: { success: boolean }

üü£ GET /api/auth/me
   Headers: { Authorization: "Bearer {token}" }
   Response: { user: { id: string, username: string, role: string } }

üü£ GET /api/users/list
   Response: { 
     users: [{ id: string, username: string, role: string, created_at: string }] 
   }


XV. C√ÅC API B·ªî SUNG - FILE UPLOAD & STORAGE
================================================================================

‚ùå POST /api/upload/image
   M·ª•c ƒë√≠ch: Upload ·∫£nh ƒë∆°n (kh√¥ng ph·∫£i dataset)
   Request: FormData { file: File }
   Response: { 
     success: boolean, 
     file_path: string, 
     url: string 
   }

‚ùå POST /api/upload/batch
   M·ª•c ƒë√≠ch: Upload nhi·ªÅu files c√πng l√∫c
   Request: FormData { files: File[] }
   Response: { 
     success: boolean, 
     uploaded: [{ filename: string, url: string, id: number }],
     failed: [{ filename: string, error: string }]
   }

‚ùå GET /api/storage/info
   M·ª•c ƒë√≠ch: Th√¥ng tin storage
   Response: {
     total_gb: number,
     used_gb: number,
     available_gb: number,
     files_count: number,
     videos_count: number,
     images_count: number
   }


XVI. T·ªîNG H·ª¢P THEO PRIORITY CHO BACKEND DEVELOPER
================================================================================

üî¥ PHASE 1 - CRITICAL (L√†m ngay, c·∫ßn cho demo):
   ‚úÖ GET  /health
   ‚úÖ GET  /admin/overview
   ‚úÖ GET  /admin/statistics
   ‚úÖ POST /vision/video
   ‚ùå GET  /api/dataset
   ‚ùå POST /api/dataset
   ‚ùå DELETE /api/dataset/{id}
   ‚ùå POST /api/detections/save
   ‚ùå GET  /api/detections/recent
   ‚ùå POST /api/stream/start
   ‚ùå GET  /api/stream/poll/{session_id}
   ‚ùå POST /api/stream/frame
   ‚ùå POST /api/stream/stop
   ‚ùå GET  /api/models/available
   ‚ùå POST /api/models/download/{id}

   T·ªïng: 5/16 done, c√≤n 11 APIs (KH√îNG d√πng WebSocket)


üü° PHASE 2 - HIGH PRIORITY (C·∫ßn cho production):
   ‚ùå GET  /api/dataset/{id}
   ‚ùå POST /api/events
   ‚ùå GET  /api/events/list
   ‚ùå DELETE /api/events/{id}
   ‚ùå GET  /api/alerts/latest
   ‚ùå GET  /api/alerts/stats
   ‚ùå PUT  /api/alerts/{id}/played
   ‚ùå GET  /api/models/info/{id}
   ‚ùå DELETE /api/models/delete/{id}
   ‚ùå GET  /api/videos/list
   ‚ùå GET  /api/videos/{id}
   ‚ùå GET  /api/videos/{id}/detections
   ‚ùå GET  /api/video/{id}/process-status
   ‚ùå POST /api/driver-monitor/analyze

   T·ªïng: 14 APIs (KH√îNG d√πng WebSocket)


üü¢ PHASE 3 - MEDIUM PRIORITY (Cho full features):
   ‚ùå POST /api/trips
   ‚ùå GET  /api/trips/list
   ‚ùå GET  /api/trips/{id}
   ‚ùå PUT  /api/trips/{id}/complete
   ‚ùå GET  /api/trips/analytics
   ‚ùå POST /api/driver-status
   ‚ùå GET  /api/driver-status
   ‚ùå GET  /api/driver-status/history
   ‚ùå GET  /api/statistics/summary
   ‚ùå GET  /api/statistics/detections-by-class
   ‚ùå GET  /api/statistics/events-by-type
   ‚ùå GET  /api/statistics/performance
   ‚ùå DELETE /api/videos/{id}
   ‚ùå GET  /api/events/stream (SSE - optional)

   T·ªïng: 13 APIs + 1 SSE endpoint (optional)


‚ö™ PHASE 4 - LOW PRIORITY (Nice to have):
   ‚ùå POST /api/ai-chat
   ‚ùå GET  /api/ai-chat/history
   ‚ùå DELETE /api/ai-chat/session/{id}
   ‚ùå GET  /api/settings
   ‚ùå PUT  /api/settings
   ‚ùå GET  /api/settings/cameras
   ‚ùå POST /api/settings/cameras
   ‚ùå POST /api/upload/image
   ‚ùå POST /api/upload/batch
   ‚ùå GET  /api/storage/info
   ‚ùå POST /api/models/download-all
   ‚ùå PUT  /api/events/{id}/acknowledge

   T·ªïng: 12 APIs (KH√îNG d√πng WebSocket)


üü£ PHASE 5 - OPTIONAL (N·∫øu c·∫ßn authentication):
   ‚ùå POST /api/auth/login
   ‚ùå POST /api/auth/logout
   ‚ùå GET  /api/auth/me
   ‚ùå GET  /api/users/list

   T·ªïng: 4 APIs


================================================================================
T·ªîNG K·∫æT TO√ÄN B·ªò
================================================================================

üìä Th·ªëng k√™ APIs:
   - ƒê√£ c√≥ (‚úÖ):        5 APIs
   - C·∫ßn l√†m (‚ùå):      63 APIs
   - T·ªïng c·ªông:         68 APIs

üìä WebSockets:
   - ‚ùå KH√îNG D√ôNG WEBSOCKET
   - ‚úÖ Thay b·∫±ng HTTP Polling + SSE

üìä Theo Priority:
   - üî¥ CRITICAL:       11 APIs (bao g·ªìm streaming APIs)
   - üü° HIGH:           14 APIs
   - üü¢ MEDIUM:         13 APIs
   - ‚ö™ LOW:            12 APIs
   - üü£ OPTIONAL:       4 APIs


================================================================================
CHECKLIST CHO BACKEND DEVELOPER
================================================================================

[ ] PHASE 1 - B·∫ÆT ƒê·∫¶U T·ª™ ƒê√ÇY:
    [ ] Setup database schemas (videos, detections, events, trips, models, alerts)
    [ ] Implement /api/dataset endpoints (GET, POST, DELETE)
    [ ] Implement /api/detections endpoints (save, recent)
    [ ] Implement /api/models endpoints (available, download)
    [ ] Implement WebSocket /ws/stream cho real-time detection
    [ ] Test v·ªõi Frontend ƒë√£ c√≥

[ ] PHASE 2 - PRODUCTION READY:
    [ ] Complete video management APIs
    [ ] Complete events & alerts system
    [ ] Complete models management
    [ ] Add more WebSocket endpoints
    [ ] Performance optimization

[ ] PHASE 3 - FULL FEATURES:
    [ ] Trips management system
    [ ] Driver monitoring system
    [ ] Advanced statistics & analytics
    [ ] System settings & configuration

[ ] PHASE 4 - ENHANCEMENTS:
    [ ] AI Chat integration (OpenAI/Claude/Llama)
    [ ] Advanced file upload
    [ ] Storage management
    [ ] Additional WebSockets

[ ] PHASE 5 - SECURITY (Optional):
    [ ] Authentication system
    [ ] User management
    [ ] Role-based access control


================================================================================
GHI CH√ö QUAN TR·ªåNG CHO BACKEND DEVELOPER
================================================================================

‚ö†Ô∏è  Response Format Standards:
    - Lu√¥n tr·∫£ v·ªÅ JSON v·ªõi structure nh·∫•t qu√°n
    - Success response: { success: true, data: {...}, message?: string }
    - Error response: { success: false, error: string, details?: any }
    - List response: { success: true, data: [...], total: number, page?: number, limit?: number }

‚ö†Ô∏è  CORS Configuration:
    - Frontend URL: https://adas.aiotlab.edu.vn
    - Local dev: http://localhost:3000
    - C·∫ßn enable CORS cho HTTP requests (KH√îNG c·∫ßn WebSocket CORS)

‚ö†Ô∏è  File Upload:
    - Max file size: 500MB (configurable)
    - Supported formats: mp4, avi, mov, mkv (video), jpg, png (image)
    - Store path convention: /storage/videos/{year}/{month}/{filename}
    - Generate thumbnails cho videos

‚ö†Ô∏è  HTTP Polling/Streaming Requirements (Thay WebSocket):
    - Polling interval: 100-200ms cho real-time detection
    - Long polling timeout: 30 seconds
    - Session management: auto cleanup sau 5 ph√∫t inactive
    - Optional: Server-Sent Events (SSE) cho live updates
    - Rate limiting: max 10 requests/second per client
    - Keep-alive connections ƒë·ªÉ gi·∫£m overhead

‚ö†Ô∏è  Database Considerations:
    - Detections table s·∫Ω r·∫•t l·ªõn ‚Üí c·∫ßn indexing t·ªët
    - Consider partitioning by date
    - Cleanup policy cho old data (> 3 months)
    - Backup strategy

‚ö†Ô∏è  Performance Requirements:
    - Detection API response time: < 100ms
    - Video upload: streaming upload, kh√¥ng ƒë·ª£i full file
    - WebSocket latency: < 50ms
    - Support concurrent connections: √≠t nh·∫•t 50 clients

‚ö†Ô∏è  Model Management:
    - Models store t·∫°i: /models/{model_id}/
    - Support lazy loading
    - Cache inference results
    - GPU memory management

‚ö†Ô∏è  Real-time Features (KH√îNG d√πng WebSocket):
    - Events/Alerts: HTTP Polling m·ªói 2-5s, ho·∫∑c SSE cho push updates
    - Dashboard stats: Cache (Redis), polling m·ªói 5s
    - Live camera/webcam: HTTP Polling v·ªõi POST frame ‚Üí GET detection
    - Video processing progress: Polling m·ªói 500ms-1s


================================================================================
API TESTING CHECKLIST
================================================================================

Sau khi implement m·ªói API, test v·ªõi:

1. ‚úÖ Swagger/OpenAPI documentation
2. ‚úÖ Postman collection
3. ‚úÖ Unit tests
4. ‚úÖ Integration tests v·ªõi Frontend
5. ‚úÖ Load testing cho critical endpoints
6. ‚úÖ Error handling (400, 404, 500, etc.)
7. ‚úÖ Validation cho request body/params
8. ‚úÖ Authentication/Authorization (n·∫øu c√≥)


================================================================================
LI√äN H·ªÜ & SUPPORT
================================================================================

Frontend codebase: /Users/chuong/Desktop/AI/ADAS/FrontEnd
API endpoints config: lib/api-endpoints.ts
API proxy routes: app/api/*/route.ts

N·∫øu c·∫ßn thay ƒë·ªïi request/response format, vui l√≤ng th√¥ng b√°o ƒë·ªÉ 
Frontend team update accordingly.

M·ªçi th·∫Øc m·∫Øc v·ªÅ API specs, h√£y xem comment trong c√°c file:
- lib/api-endpoints.ts (endpoint paths)
- app/api/*/route.ts (expected request/response format)
- components/ v√† app/ pages (usage examples)


================================================================================
VERSION & UPDATE LOG
================================================================================

v1.0 - 21/12/2025: Initial API specification
- T·ªïng h·ª£p t·∫•t c·∫£ APIs c·∫ßn thi·∫øt
- Ph√¢n chia theo priority
- Th√™m request/response format chi ti·∫øt


================================================================================
K·∫æT LU·∫¨N
================================================================================

Frontend ADAS ƒë√£ s·∫µn s√†ng, nh∆∞ng c·∫ßn Backend implement ~63 APIs 

            HDPE th√¨ ngon lu√¥n h·∫π h·∫π h·∫π
